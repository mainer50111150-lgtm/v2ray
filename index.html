<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Ú©Ø§Ù†ÙÛŒÚ¯ Ø±Ø§ÛŒÚ¯Ø§Ù† Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</title>

<style>

body{
    font-family: Tahoma;
    background:#2e2e2e;
    color:#fff;
    margin:0;
    padding:20px;
}

.container{
    max-width:600px;
    margin:auto;
    background:#444;
    padding:25px;
    border-radius:12px;
    text-align:center;
    box-shadow:0 0 20px #000;
}

h1{color:#4fc3f7}

.button-group{
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    justify-content:center;
}

.btn{
    width:48%;
    padding:12px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    background:#2196f3;
    color:#fff;
    font-size:15px;
}

.btn:hover{background:#1976d2}

.green{background:#4caf50}
.red{background:#f44336}

.info{
    background:#333;
    padding:10px;
    margin:15px 0;
    border-radius:8px;
}
.support{
    background:#25d366;
}

.support:hover{
    background:#1da851;
}

#msg{
    display:none;
    margin-top:15px;
    padding:10px;
    border-radius:6px;
    font-weight:bold;
}

.footer{
    margin-top:20px;
    font-size:14px;
    color:#ccc;
}

</style>
</head>

<body>

<div class="container">

<h1>Ú©Ø§Ù†ÙÛŒÚ¯ Ø±Ø§ÛŒÚ¯Ø§Ù†ğŸ“¡</h1>

<div class="info">
ğŸ“¡ ØªØ¹Ø¯Ø§Ø¯: <span id="count">0</span> |
â° Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: <span id="time">---</span>
</div>

<div class="button-group">

<button class="btn green" id="refresh">ğŸ”„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ</button>
<button class="btn" id="one">Ú©Ù¾ÛŒ 1ï¸âƒ£</button>
<button class="btn" id="five">Ú©Ù¾ÛŒ 5ï¸âƒ£</button>
<button class="btn support" id="support">
ğŸ’¬ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ØªÙ„Ú¯Ø±Ø§Ù…
</button>

<button class="btn" id="ten">Ú©Ù¾ÛŒ ğŸ”Ÿ</button>
<button class="btn" id="all">Ú©Ù¾ÛŒ Ù‡Ù…Ù‡ğŸ›°ï¸</button>
<button class="btn red" id="clear">ğŸ—‘ï¸ Ø­Ø°Ù Ú©Ø´</button>

</div>

<div id="msg"></div>

<div class="footer" style="color: #000; background-color: #1976d2; border-radius: 5px; padding-bottom: 5px; " >
Ù†Ú©ØªÙ‡:Ø§Ú¯Ø± Ø±Ø¨Ø§Øª Ø®Ø±Ø§Ø¨ Ø´Ø¯ Ú©Ø´ Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯!
<br>Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§ Ø¨Ù‡ ØµÙˆØ±Øª ØªØµØ§Ø¯ÙÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù…ÛŒØ´ÙˆÙ†Ø¯ÛŒ<br>
</div>

</div>

<script>

/* ØªÙ†Ø¸ÛŒÙ…Ø§Øª */

const URL = "https://raw.githubusercontent.com/SoliSpirit/v2ray-configs/main/Countries/Us.txt";

const CACHE = "VLESS_CACHE_PRO";
const TIME = 30 * 60 * 1000;

let configs = [];

/* Ø§Ø¨Ø²Ø§Ø± */

function show(text,color){

    let m = document.getElementById("msg");

    m.innerText = text;
    m.style.background = color;
    m.style.display = "block";

    setTimeout(()=>{
        m.style.display="none";
    },3000);
}

function now(){
    return new Date().toLocaleString("fa-IR");
}

function shuffle(arr){
    return arr.sort(()=>Math.random()-0.5);
}

/* Ú©Ø´ */

function save(){
    localStorage.setItem(CACHE,JSON.stringify({
        time:Date.now(),
        list:configs
    }));
}

function loadCache(){

    let c = localStorage.getItem(CACHE);

    if(!c) return false;

    let data = JSON.parse(c);

    if(Date.now()-data.time > TIME) return false;

    configs = data.list;

    updateUI(data.time);

    show("âš¡ Ø§Ø² Ú©Ø´ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯","#4caf50");

    return true;
}

/* Ø¯Ø±ÛŒØ§ÙØª */

async function fetchData(){

    show("â³ Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª...","#ff9800");

    try{

        let res = await fetch(URL);

        if(!res.ok) throw "error";

        let text = await res.text();

        configs = text
        .split("\n")
        .map(l=>l.trim())
        .filter(l=>/^(vless|vmess|trojan|ss):\/\//i.test(l));

        save();

        updateUI(Date.now());

        show("âœ… Ù…ÙˆÙÙ‚: "+configs.length,"#4caf50");

    }catch{

        show("âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„","#f44336");
    }
}

/* Ø±Ø§Ø¨Ø· */

function updateUI(t){

    document.getElementById("count").innerText=configs.length;

    document.getElementById("time").innerText=
    new Date(t).toLocaleString("fa-IR");
}

/* Ú©Ù¾ÛŒ */

/* Ú©Ù¾ÛŒ */

function copy(arr){
    if(!arr.length){
        show("âŒ Ù„ÛŒØ³Øª Ø®Ø§Ù„ÛŒ Ø§Ø³Øª","#f44336");
        return;
    }

    let txt = arr.join("\n");

    if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(txt)
        .then(()=> show("âœ… Ù‡Ù…Ù‡ Ú©Ù¾ÛŒ Ø´Ø¯: "+arr.length,"#4caf50"))
        .catch(()=> {
            // Ø¨Ø±Ø§ÛŒ Ù…ØªÙ† Ø·ÙˆÙ„Ø§Ù†ÛŒ Ø±ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„
            show("âš ï¸ Ù…Ø±ÙˆØ±Ú¯Ø± Ø§Ø¬Ø§Ø²Ù‡ Ú©Ù¾ÛŒ Ú©Ø§Ù…Ù„ Ù†Ø¯Ø§Ø¯","#ff9800");
            // Ù†Ù…Ø§ÛŒØ´ Ø¯Ø± textarea Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ø³ØªÛŒ
            let area = document.createElement("textarea");
            area.value = txt;
            document.body.appendChild(area);
            area.focus();
            area.select();
            alert("Ù…ØªÙ† Ø·ÙˆÙ„Ø§Ù†ÛŒ Ø§Ø³ØªØŒ Ù„Ø·ÙØ§Ù‹ Ø¯Ø³ØªÛŒ Ú©Ù¾ÛŒ Ú©Ù†ÛŒØ¯");
        });
    } else {
        // Ù…ÙˆØ¨Ø§ÛŒÙ„ Ù‚Ø¯ÛŒÙ…ÛŒ ÛŒØ§ execCommand Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯
        let area = document.createElement("textarea");
        area.value = txt;
        document.body.appendChild(area);
        area.focus();
        area.select();
        alert("Ú©Ù¾ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ù†Ø´Ø¯ØŒ Ù„Ø·ÙØ§Ù‹ Ø¯Ø³ØªÛŒ Ú©Ù¾ÛŒ Ú©Ù†ÛŒØ¯");
    }
}


// ØªØ§Ø¨Ø¹ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ø¨Ø±Ø§ÛŒ Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù†
function fallbackCopy(text, count) {
    let textArea = document.createElement("textarea");
    textArea.value = text;
    
    // Ø§ÛŒÙ† ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ø±Ø§ÛŒ Ù¾Ù†Ù‡Ø§Ù† Ú©Ø±Ø¯Ù† textarea Ø¯Ø± ØµÙØ­Ù‡ Ø¶Ø±ÙˆØ±ÛŒ Ø§Ø³Øª
    textArea.style.position = "fixed";
    textArea.style.top = "0";
    textArea.style.left = "0";
    textArea.style.opacity = "0";
    
    document.body.appendChild(textArea);
    textArea.focus();
    textArea.select();

    try {
        // Ø§Ø¬Ø±Ø§ÛŒ Ø¯Ø³ØªÙˆØ± Ú©Ù¾ÛŒ
        let successful = document.execCommand('copy');
        if (successful) {
            show(`âœ… Ú©Ù¾ÛŒ Ø´Ø¯ (Fallback): ${count}`,"#4caf50");
        } else {
            show("âŒ Ø¯Ø³ØªÙˆØ± Ú©Ù¾ÛŒ Ø¨Ø§ Ø´Ú©Ø³Øª Ù…ÙˆØ§Ø¬Ù‡ Ø´Ø¯","#f44336");
        }
    } catch (err) {
        show("âŒ Ø®Ø·Ø§ÛŒ Ú©Ù¾ÛŒ Ø¯Ø± Fallback","#f44336");
        console.error('Fallback copy failed:', err);
    }

    document.body.removeChild(textArea);
}


/* Ø´Ø±ÙˆØ¹ */

document.addEventListener("DOMContentLoaded",()=>{

    if(!loadCache()) fetchData();

    document.getElementById("refresh").onclick=fetchData;

    document.getElementById("clear").onclick=()=>{

        localStorage.removeItem(CACHE);

        show("ğŸ—‘ï¸ Ú©Ø´ Ø­Ø°Ù Ø´Ø¯","#2196f3");
    };

    document.getElementById("one").onclick=()=>copy(shuffle([...configs]).slice(0,1));

    document.getElementById("five").onclick=()=>copy(shuffle([...configs]).slice(0,5));

    document.getElementById("ten").onclick=()=>copy(shuffle([...configs]).slice(0,10));

    document.getElementById("all").onclick=()=>copy(configs);

});
document.getElementById("support").onclick = ()=>{

    window.open(
        "https://t.me/BTC_ETH_DOG_SOL",
        "_blank"
    );

};

</script>

</body>
</html>
