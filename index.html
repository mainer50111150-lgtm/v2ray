<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ú©Ø§Ù†ÙÛŒÚ¯ Ø±Ø§ÛŒÚ¯Ø§Ù† Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</title>
<style>
body {
    font-family: Tahoma;
    background:#2e2e2e;
    color:#fff;
    margin:0;
    padding:20px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.container {
    max-width:600px;
    width: 100%;
    margin:auto;
    background:#444;
    padding:25px;
    border-radius:12px;
    text-align:center;
    box-shadow:0 0 20px #000;
}

h1 { color:#4fc3f7; margin-bottom: 25px; }

.button-group {
    display: flex;
    flex-wrap: wrap;
    gap:10px;
    justify-content: center;
    margin-top: 20px;
}

/* Ø¯Ú©Ù…Ù‡ Ø¨Ø²Ø±Ú¯ ÙˆØ³Ø· ØµÙØ­Ù‡ Ø§Ù…Ø§ Ø¬Ù…Ø¹ Ùˆ Ø¬ÙˆØ± */
#one {
    width: 30%;
    padding: 18px;
    font-size: 20px;
    border-radius: 10px;
    background: #4caf50;
    color: #fff;
    cursor: pointer;
    margin-bottom: 15px;
    transition: transform 0.2s, background 0.2s;
}

#one:hover {
    background: #45a049;
    transform: scale(1.05);
}

/* Ø¨Ù‚ÛŒÙ‡ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ú©ÙˆÚ†Ú©â€ŒØªØ± Ùˆ Ù¾Ø§ÛŒÛŒÙ† */
.btn {
    width: 48%;
    padding:12px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    background:#2196f3;
    color:#fff;
    font-size:15px;
    transition: transform 0.2s, background 0.2s;
}

.btn:hover { 
    background:#1976d2;
    transform: scale(1.05);
}

.red{ background:#f44336; }
.support{ background:#25d366; }
.support:hover{ background:#1da851; }

#msg {
    display:none;
    margin-top:15px;
    padding:10px;
    border-radius:6px;
    font-weight:bold;
}

.footer {
    margin-top:20px;
    font-size:14px;
    color:#ccc;
    text-align: center;
    font-weight: bold;
}
</style>
</head>
<body>

<div class="container">
<h1>Ú©Ø§Ù†ÙÛŒÚ¯ Ø±Ø§ÛŒÚ¯Ø§Ù†ğŸ“¡</h1>

<div class="info">
ğŸ“¡ ØªØ¹Ø¯Ø§Ø¯: <span id="count">0</span> | â° Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: <span id="time">---</span>
</div>

<!-- Ø¯Ú©Ù…Ù‡ Ø¬Ù…Ø¹ Ùˆ Ø¬ÙˆØ± ÙˆØ³Ø· ØµÙØ­Ù‡ -->
<button id="one">Ú©Ù¾ÛŒ ØªØµØ§Ø¯ÙÛŒ 1ï¸âƒ£</button>

<!-- Ø¨Ù‚ÛŒÙ‡ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ -->
<div class="button-group">
<button class="btn green" id="refresh">ğŸ”„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ</button>
<button class="btn support" id="support">ğŸ’¬ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ØªÙ„Ú¯Ø±Ø§Ù…</button>
<button class="btn red" id="clear">ğŸ—‘ï¸ Ø­Ø°Ù Ú©Ø´</button>
</div>

<div id="msg"></div>

<div class="footer" style="color: #000; background-color: #1976d2; border-radius: 5px; padding-bottom: 5px;">
Ù†Ú©ØªÙ‡: Ú©Ø§Ù†ÙÛŒÚ¯â€ŒÙ‡Ø§ Ø¯ÙˆÙ†Ù‡â€ŒØ¯ÙˆÙ†Ù‡ Ùˆ ØªØµØ§Ø¯ÙÛŒ Ú©Ù¾ÛŒ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯<br>Ø¢Ø®Ø±ÛŒÙ† Ø®Ø·ÙˆØ· ÙØ§ÛŒÙ„ Ø¯Ø± Ø§ÙˆÙ„ÙˆÛŒØª Ù‡Ø³ØªÙ†Ø¯
</div>
</div>

<script>
const URL = "https://raw.githubusercontent.com/SoliSpirit/v2ray-configs/main/Countries/Us.txt";
const CACHE = "VLESS_CACHE_PRO";
const TIME = 30 * 60 * 1000;
let configs = [];

// Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù…
function show(text,color){
    let m = document.getElementById("msg");
    m.innerText = text;
    m.style.background = color;
    m.style.display = "block";
    setTimeout(()=>{ m.style.display="none"; },3000);
}

// Ú©Ø´
function save(){
    localStorage.setItem(CACHE,JSON.stringify({time:Date.now(),list:configs}));
}
function loadCache(){
    let c = localStorage.getItem(CACHE);
    if(!c) return false;
    let data = JSON.parse(c);
    if(Date.now()-data.time > TIME) return false;
    configs = data.list;
    updateUI(data.time);
    show("âš¡ Ø§Ø² Ú©Ø´ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯","#4caf50");
    return true;
}

// Ø¯Ø±ÛŒØ§ÙØª ÙØ§ÛŒÙ„
async function fetchData(){
    show("â³ Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª...","#ff9800");
    try{
        let res = await fetch(URL);
        if(!res.ok) throw "error";
        let text = await res.text();
        configs = text.split("\n")
            .map(l=>l.trim())
            .filter(l=>/^(vless|vmess|trojan|ss):\/\//i.test(l));
        save();
        updateUI(Date.now());
        show("âœ… Ù…ÙˆÙÙ‚: "+configs.length,"#4caf50");
    }catch{
        show("âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„","#f44336");
    }
}

// Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ UI
function updateUI(t){
    document.getElementById("count").innerText=configs.length;
    document.getElementById("time").innerText=new Date(t).toLocaleString("fa-IR");
}

// Ø§Ù†ØªØ®Ø§Ø¨ ØªØµØ§Ø¯ÙÛŒ Ø§Ø² Ù¾Ø§ÛŒÛŒÙ† ÙØ§ÛŒÙ„
function pickRandomFromBottom(){
    if(!configs.length){
        show("âŒ Ù„ÛŒØ³Øª Ø®Ø§Ù„ÛŒ Ø§Ø³Øª","#f44336");
        return null;
    }
    let lastLines = configs.slice(-20);
    return lastLines[Math.floor(Math.random()*lastLines.length)];
}

// Ú©Ù¾ÛŒ Ø¯ÙˆÙ†Ù‡â€ŒØ§ÛŒ
function copyOne(){
    let cfg = pickRandomFromBottom();
    if(!cfg) return;
    if(navigator.clipboard && navigator.clipboard.writeText){
        navigator.clipboard.writeText(cfg)
        .then(()=> show("âœ… Ú©Ù¾ÛŒ Ø´Ø¯","#4caf50"))
        .catch(()=> {
            prompt("âš ï¸ Ú©Ù¾ÛŒ Ù†Ø´Ø¯. Ù„Ø·ÙØ§Ù‹ Ø¯Ø³ØªÛŒ Ú©Ù¾ÛŒ Ú©Ù†ÛŒØ¯:", cfg);
        });
    }else{
        prompt("âš ï¸ Ú©Ù¾ÛŒ Ù†Ø´Ø¯. Ù„Ø·ÙØ§Ù‹ Ø¯Ø³ØªÛŒ Ú©Ù¾ÛŒ Ú©Ù†ÛŒØ¯:", cfg);
    }
}

// Ø´Ø±ÙˆØ¹
document.addEventListener("DOMContentLoaded",()=>{
    if(!loadCache()) fetchData();
    document.getElementById("refresh").onclick=fetchData;
    document.getElementById("clear").onclick=()=>{
        localStorage.removeItem(CACHE);
        show("ğŸ—‘ï¸ Ú©Ø´ Ø­Ø°Ù Ø´Ø¯","#2196f3");
    };
    document.getElementById("one").onclick=copyOne;
    document.getElementById("support").onclick=()=>{
        window.open("https://t.me/BTC_ETH_DOG_SOL","_blank");
    };
});
</script>

</body>
</html>
